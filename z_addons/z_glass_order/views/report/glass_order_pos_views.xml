<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <template id="glass_order_pos">
            <div class="container py-4 px-3" style="line-height: 1.5; font-size: 24px; padding-left: -10px !important; padding-right: -10px !important; font-family: 'Arial', sans-serif;">
                <style>
                       @media print {
                           .table-no-border {
                               border-collapse: collapse;
                           }
                           .table-no-border th,
                           .table-no-border td {
                               border: none;
                           }
                           }
                </style>
                <div t-if="dataAppointment and dataAppointment.printing_type == 'Vivision'" class="align-items-center text-center">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" alt="Logo" style="width: 80% "/>
                    <div class="mt-3" style="font-size:18px">
                        <strong>Công ty Cổ phần Công nghệ và Đầu tư Vision</strong>
                    </div>
                    <p class="mt-2 mb-1" style="font-size:18px">514 Bạch Mai, Trương Định, Hai Bà Trưng- Hà Nội</p>
                    <div class="">
                        <span class="mb-1 mx-2">Mobile: 0334141213</span>
                        <span class="mb-1">https://vivision.vn</span>
                    </div>
                    <div class="font-weight-bold mt-4" style="font-size: 30px; font-weight: bold">PHIẾU THÔNG TIN KÍNH</div>
                </div>
                <div t-else="" class="align-items-center text-center">
                    <img src="z_web/static/image/print_logo_vision_kid.png" alt="Logo" style="width: 80%"/>
                    <div class="mt-2" style="font-size:18px">
                        <strong>Công ty Cổ phần Công nghệ và Đầu tư Vision</strong>
                    </div>
                    <p class="mt-2 mb-1" style="font-size:18px">213 Tôn Đức Thắng, Hàng Bột, Đống Đa, Hà Nội</p>
                    <p class="mt-2 mb-1" style="font-size:18px">514 Bạch Mai,Trương Định, Hai Bà Trưng- Hà Nội</p>
                    <div>
                        <span class="mb-1 mx-2" style="font-size:18px">Mobile: 0334141213</span>
                        <span class="mb-1" style="font-size:18px">https://vivision.vn</span>
                    </div>
                    <p class="mb-1" style="font-size:18px">Fanpage: Hệ thống phòng khám mắt trẻ em</p>
                    <div class="font-weight-bold mt-4" style="font-size: 30px; font-weight: bold">PHIẾU THÔNG TIN KÍNH</div>
                </div>
                <table class="table mt-2 table-borderless">
                    <tbody>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Họ và tên:
                            </td>
                            <td style="border: none; padding: 0">
                                <strong t-esc="doc.customer_id.name"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Tuổi:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.customer_id.age"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Giới tính:
                            </td>
                            <td style="border: none; padding: 0">
                                <div t-if="doc.customer_id.gender == 'male' ">Nam</div>
                                <div t-elif="doc.customer_id.gender == 'female' ">Nữ</div>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Điện thoại:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.customer_id.mobile"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Địa chỉ:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.customer_id.street"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="my-1" style="width:100%; height: 1px; background: black"/>
                <table class="table mt-2 table-borderless">
                    <tbody>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Mắt phải:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.right_eye"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Mắt trái:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.left_eye"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                Add:
                            </td>
                            <td style="border: none; padding: 0">
                                <span t-esc="doc.add"/>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table class="table table-borderless">
                    <tbody>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                    Khoảng cách đồng tử (mm):
                            </td>
                            <td style="border: none; padding: 0">
                                <div t-esc="doc.pupillary_distance"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                    Độ cao đồng tử (mm):
                            </td>
                            <td style="border: none; padding: 0">
                                <div t-esc="doc.pupillary_height"/>
                            </td>
                        </tr>
                        <tr>
                            <td style="width: 60%; border: none; padding: 0">
                                    Loại kính:
                            </td>
                            <td style="border: none; padding: 0">
                                <div t-if="doc.multifocal">- Đa tròng</div>
                                <div t-if="doc.bifocal">- Hai tròng</div>
                                <div t-if="doc.single_vision">- Đơn tròng</div>
                                <div t-if="doc.near_vision">- Nhìn gần</div>
                                <div t-if="doc.far_vision">- Nhìn xa</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div>
                    <table class="table mt-3">
                        <thead>
                            <tr class="text-center">
                                <th style="width: 70%;">Tên SP</th>
                                <th style="width: 30%;">Số lượng</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-foreach="doc.glass_order_line_ids" t-as="glass_order">
                                <tr class="text-center">
                                    <td>
                                        <t t-esc="glass_order.product_id.display_name"/>
                                    </td>
                                    <td>
                                        <t t-esc="glass_order.quantity"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                </div>
                <div>
                    <table class="table mt-3 table-borderless">
                        <tbody>
                            <tr>
                                <td style="width: 60%; border: none; padding: 0">
                                       Hạn lấy kính:
                                </td>
                                <td style="border: none; padding: 0">
                                    <span t-esc="doc.order_date.strftime('%d/%m/%Y')"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 60%; border: none; padding: 0">
                                       Hình thức nhận kính:
                                </td>
                                <td style="border: none; padding: 0">
                                    <t t-if="doc.delivery_method == 'delivery'">
                                        <span>Giao hàng</span>
                                    </t>
                                    <t t-if="doc.delivery_method == 'clinic'">
                                        <span>Nhận tại phòng khám</span>
                                    </t>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 60%; border: none; padding: 0">
                                       Tư vấn:
                                </td>
                                <td style="border: none; padding: 0">
                                    <span t-esc="doc.consultant"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 60%; border: none; padding: 0">
                                       Người cắt:
                                </td>
                                <td style="border: none; padding: 0">
                                    <span t-esc="doc.cutter"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <strong>Địa chỉ giao hàng :</strong>
                    <span class="ml-2" t-esc="doc.recipient_address"/>
                </div>
                <div>
                    <strong>Ghi chú :</strong>
                    <span class="ml-2" t-esc="doc.note"/>
                </div>
                <div class="text-center mt-4">
                    <strong>Vivision - New Vision. New Life</strong>
                    <p>Hotline: 0334141213</p>
                </div>
            </div>
        </template>


        <template id="report_pos_glass_order_template">
            <t t-call="web.html_container">
                <t t-call="web.basic_layout">
                    <t t-set="dataAppointment" t-value="docs.visit_id"></t>
                    <t t-set="company" t-value="docs.company_id"></t>
                    <t t-foreach="docs" t-as="doc">
                        <t-call t-call="z_glass_order.glass_order_pos"/>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>